{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
    .image-container {
        display: flex; /* 画像を横並びに配置 */
        align-items: center; /* 縦方向の中央揃え */
        gap: 20px; /* 画像間の隙間 */
    }

    .image-container label {
        cursor: pointer; /* ポインターの形状を手を差し伸べる指に変更 */
    }

    .image-container img {
        width: 200px; /* 画像の幅を調整 */
        height: auto; /* 高さを自動調整 */
    }
</style>

    <h1>クイズ</h1>
    <form method="post" action="{% url 'pt_kokushi:submit_answer' %}">
        {% csrf_token %}
        <p>{{ question.question_text }}</p>
        <div class="image-container">
            <label>
                <img src="{% static 'image/easy_study/question_image/maru.png' %}" alt="丸の画像" data-answer="A">
            </label>
            <label>
                <img src="{% static 'image/easy_study/question_image/batu.png' %}" alt="バツの画像" data-answer="B">
            </label>            
        </div>
    </form>
{% endblock %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.image-container img').forEach(img => {
            img.addEventListener('click', function() {
                const selectedAnswer = this.dataset.answer; // data-answer 属性から選択された回答を取得
                const questionId = '{{ question.id }}'; // Django テンプレート変数から問題のIDを取得
    
                // Ajaxリクエストを送信
                fetch('{% url "pt_kokushi:submit_answer" %}', {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': '{{ csrf_token }}', // CSRFトークン
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        question_id: questionId,
                        selected_answer: selectedAnswer
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    // 必要に応じて、クイズの結果を表示するなどの処理を追加
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
            });
        });
    });
    </script>
    
